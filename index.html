<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Galaxia del Amor</title>

<style>
html,body{margin:0;height:100%;background:#000;overflow:hidden}
canvas{display:block}
.player{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
padding:10px 18px;
border:2px solid #ff8800;
border-radius:999px;
color:white;
font-family:Arial;
background:rgba(0,0,0,.4);
z-index:9999;
}
.player button{
background:none;border:none;color:white;font-size:22px;cursor:pointer
}
</style>
</head>

<body>
<canvas id="c"></canvas>

<div class="player">
<button id="play">▶️ Música</button>
</div>

<audio id="audio">
<source src="https://www.dropbox.com/scl/fi/qfv28rqu6b36jwusao4x4/Love.MP3?raw=1" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
/* ========= AUDIO ========= */
const audio=document.getElementById("audio");
document.getElementById("play").onclick=()=>{
  audio.play();
};

/* ========= ESCENA ========= */
const renderer=new THREE.WebGLRenderer({canvas:document.getElementById("c"),antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));

const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,5000);
camera.position.z=320;

/* ========= LUZ ========= */
scene.add(new THREE.AmbientLight(0xffaa66,1));
const light=new THREE.PointLight(0xff6600,1.5);
scene.add(light);

/* ========= HUMO NARANJA ========= */
const smokeGeo=new THREE.BufferGeometry();
const count=900;
const pos=new Float32Array(count*3);
for(let i=0;i<count;i++){
  const r=600*Math.random();
  const a=Math.random()*Math.PI*2;
  pos[i*3]=Math.cos(a)*r;
  pos[i*3+1]=(Math.random()-0.5)*300;
  pos[i*3+2]=Math.sin(a)*r;
}
smokeGeo.setAttribute("position",new THREE.BufferAttribute(pos,3));
const smoke=new THREE.Points(smokeGeo,new THREE.PointsMaterial({
  color:0xff8844,
  size:6,
  transparent:true,
  opacity:0.15,
  blending:THREE.AdditiveBlending,
  depthWrite:false
}));
scene.add(smoke);

/* ========= ANILLOS SATURNO ========= */
function ring(i,o,op){
  const g=new THREE.RingGeometry(i,o,256);
  const m=new THREE.MeshBasicMaterial({
    color:0xffaa66,
    transparent:true,
    opacity:op,
    side:THREE.DoubleSide,
    blending:THREE.AdditiveBlending,
    depthWrite:false
  });
  const r=new THREE.Mesh(g,m);
  r.rotation.x=Math.PI/2;
  return r;
}
const ring1=ring(70,95,0.6);
const ring2=ring(100,130,0.35);
scene.add(ring1,ring2);

/* ========= FOTOS ========= */
const loader=new THREE.TextureLoader();

function photo(src,size,order){
  const mat=new THREE.SpriteMaterial({
    map:loader.load(src),
    depthTest:false,
    depthWrite:false
  });
  const s=new THREE.Sprite(mat);
  s.scale.set(size,size,1);
  s.renderOrder=order;
  return s;
}

const center=photo("foto1.jpg",90,10);
scene.add(center);

const p2=photo("foto2.jpg",60,10);
const p3=photo("foto3.jpg",60,10);
scene.add(p2,p3);

let a2=0,a3=Math.PI;

/* ========= ANIMACIÓN ========= */
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.01;

  smoke.rotation.y+=0.0006;
  ring1.rotation.z+=0.002;
  ring2.rotation.z-=0.0016;

  a2+=0.01;
  a3-=0.012;
  p2.position.set(Math.cos(a2)*150,0,Math.sin(a2)*150);
  p3.position.set(Math.cos(a3)*210,0,Math.sin(a3)*210);

  camera.position.x=Math.sin(t*0.15)*320;
  camera.position.z=Math.cos(t*0.15)*320;
  camera.lookAt(0,0,0);

  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>
