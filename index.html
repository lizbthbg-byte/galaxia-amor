<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Nuestra Galaxia ðŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:Arial, sans-serif;
}
canvas{display:block}

/* BOTÃ“N PLAY */
#playBtn{
  position:fixed;
  bottom:24px;
  left:50%;
  transform:translateX(-50%);
  padding:14px 28px;
  font-size:18px;
  border:none;
  border-radius:40px;
  background:#ff6fa5;
  color:white;
  cursor:pointer;
  box-shadow:0 0 25px #ff9cc7;
  z-index:50;
}
</style>
</head>

<body>

<button id="playBtn">ðŸ’– Reproducir</button>

<audio id="audio" loop>
  <source src="amor.mp3" type="audio/mpeg">
</audio>

<canvas id="c"></canvas>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
/* AUDIO */
const audio=document.getElementById("audio");
document.getElementById("playBtn").onclick=()=>{
  audio.play();
  document.getElementById("playBtn").style.display="none";
};

/* THREE */
const canvas=document.getElementById("c");
const renderer=new THREE.WebGLRenderer({canvas,antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));

const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,5000);
camera.position.z=300;

scene.add(new THREE.AmbientLight(0xffffff,1));

/* ESTRELLAS */
const starGeo=new THREE.BufferGeometry();
const starCount=2000;
const starPos=new Float32Array(starCount*3);
for(let i=0;i<starCount;i++){
  const r=1500*Math.random();
  const a=Math.random()*Math.PI*2;
  const b=Math.acos(2*Math.random()-1);
  starPos[i*3]=r*Math.sin(b)*Math.cos(a);
  starPos[i*3+1]=r*Math.cos(b);
  starPos[i*3+2]=r*Math.sin(b)*Math.sin(a);
}
starGeo.setAttribute("position",new THREE.BufferAttribute(starPos,3));
scene.add(new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({size:1.4,color:0xffffff})
));

const loader=new THREE.TextureLoader();

/* FOTO CENTRAL */
const center=new THREE.Sprite(
  new THREE.SpriteMaterial({
    map:loader.load("centro.jpg"),
    depthTest:false
  })
);
center.scale.set(150,150,1);
center.position.set(0,0,0);
center.renderOrder=30;
scene.add(center);

/* FOTOS */
const fotos=[];
["foto1.jpg","foto2.jpg"].forEach((img,i)=>{
  const s=new THREE.Sprite(
    new THREE.SpriteMaterial({
      map:loader.load(img),
      depthTest:false
    })
  );
  s.scale.set(100,70,1);
  s.position.set((i===0?-160:160),20,40);
  s.renderOrder=20;
  scene.add(s);
  fotos.push(s);
});

/* FRASES (FORZADAS VISIBLES) */
const frases=[
 "ðŸ’– Mi amor",
 "ðŸŒ™ Mi lugar",
 "ðŸ± Nuestro gatito",
 "âœ¨ Siempre tÃº",
 "ðŸŒ¸ Contigo",
 "â¤ï¸ Te amo"
];

frases.forEach((txt,i)=>{
  const c=document.createElement("canvas");
  c.width=512; c.height=256;
  const ctx=c.getContext("2d");
  ctx.font="bold 60px Arial";
  ctx.fillStyle="#ffffff";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.shadowColor="#ff6fa5";
  ctx.shadowBlur=30;
  ctx.fillText(txt,256,128);

  const tex=new THREE.CanvasTexture(c);
  const spr=new THREE.Sprite(
    new THREE.SpriteMaterial({
      map:tex,
      transparent:true,
      depthTest:false
    })
  );
  spr.scale.set(180,80,1);
  spr.position.set((i-2.5)*110,-140,60);
  spr.renderOrder=40;
  scene.add(spr);
});

/* ANIMACIÃ“N */
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.01;

  const beat=audio.paused ? Math.sin(t*2) : Math.sin(audio.currentTime*2);
  const pulse=1+0.08*Math.abs(beat);
  center.scale.set(150*pulse,150*pulse,1);

  fotos.forEach((f,i)=>{
    f.rotation.z+=0.002*(i?1:-1);
  });

  camera.position.x=Math.sin(t*0.3)*18;
  camera.lookAt(0,0,0);

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
