<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Nuestra Galaxia ðŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:Arial, sans-serif;
}
canvas{display:block}

/* BOTÃ“N PLAY */
#playBtn{
  position:fixed;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);
  padding:14px 28px;
  font-size:18px;
  border:none;
  border-radius:40px;
  background:#ff6fa5;
  color:white;
  cursor:pointer;
  box-shadow:0 0 25px #ff9cc7;
  z-index:20;
}
</style>
</head>

<body>

<button id="playBtn">ðŸ’– Reproducir</button>

<audio id="audio" loop>
  <source src="amor.mp3" type="audio/mpeg">
</audio>

<canvas id="c"></canvas>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
/* AUDIO */
const audio=document.getElementById("audio");
document.getElementById("playBtn").onclick=()=>{
  audio.play();
  document.getElementById("playBtn").style.display="none";
};

/* THREE BASICO */
const canvas=document.getElementById("c");
const renderer=new THREE.WebGLRenderer({canvas,antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));

const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,5000);
camera.position.z=320;

/* LUZ */
scene.add(new THREE.AmbientLight(0xffffff,1));

/* ESTRELLAS */
const stars=new THREE.BufferGeometry();
const starCount=2200;
const starPos=new Float32Array(starCount*3);

for(let i=0;i<starCount;i++){
  const r=1800*Math.random();
  const a=Math.random()*Math.PI*2;
  const b=Math.acos(2*Math.random()-1);
  starPos[i*3]=r*Math.sin(b)*Math.cos(a);
  starPos[i*3+1]=r*Math.cos(b);
  starPos[i*3+2]=r*Math.sin(b)*Math.sin(a);
}
stars.setAttribute("position",new THREE.BufferAttribute(starPos,3));
scene.add(new THREE.Points(
  stars,
  new THREE.PointsMaterial({size:1.4,color:0xffffff})
));

/* CARGADOR */
const loader=new THREE.TextureLoader();

/* FOTO CENTRAL */
const center=new THREE.Sprite(
  new THREE.SpriteMaterial({
    map:loader.load("centro.jpg"),
    depthTest:false
  })
);
center.scale.set(140,140,1);
center.position.set(0,0,0);
center.renderOrder=10;
scene.add(center);

/* FOTOS ORBITANDO */
const fotos=[];
["foto1.jpg","foto2.jpg"].forEach((img,i)=>{
  const s=new THREE.Sprite(
    new THREE.SpriteMaterial({
      map:loader.load(img),
      depthTest:false
    })
  );
  s.scale.set(95,70,1);
  s.userData={
    ang:Math.random()*Math.PI*2,
    rad:200+45*i,
    vel:0.002+0.001*i
  };
  s.position.y=40-i*70;
  s.renderOrder=6;
  scene.add(s);
  fotos.push(s);
});

/* FRASES FLOTANTES */
const frases=[
 "ðŸ’– Mi amor","ðŸŒ™ Mi lugar","ðŸ± Nuestro gatito","âœ¨ Siempre tÃº",
 "ðŸŒ¸ Contigo","ðŸ”¥ Mi persona","ðŸ’« Universo",
 "â¤ï¸ Te amo","ðŸŒŒ Nuestro mundo","ðŸŒ· Para siempre"
];

const textos=[];
frases.forEach((txt,i)=>{
  const c=document.createElement("canvas");
  c.width=512; c.height=128;
  const ctx=c.getContext("2d");
  ctx.font="bold 52px Arial";
  ctx.fillStyle="#ffffff";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.shadowColor="#ff8fb8";
  ctx.shadowBlur=25;
  ctx.fillText(txt,256,64);

  const tex=new THREE.CanvasTexture(c);
  const spr=new THREE.Sprite(
    new THREE.SpriteMaterial({map:tex,transparent:true,depthTest:false})
  );
  spr.scale.set(80,20,1);
  spr.userData={
    a:Math.random()*Math.PI*2,
    r:260+Math.random()*120,
    v:0.0006+Math.random()*0.0006
  };
  scene.add(spr);
  textos.push(spr);
});

/* ANIMACIÃ“N */
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.01;

  /* latido central */
  const beat=audio.paused ? Math.sin(t*2) : Math.sin(audio.currentTime*2);
  const pulse=1+0.09*Math.abs(beat);
  center.scale.set(140*pulse,140*pulse,1);

  /* fotos */
  fotos.forEach(f=>{
    f.userData.ang+=f.userData.vel;
    f.position.x=f.userData.rad*Math.cos(f.userData.ang);
    f.position.z=f.userData.rad*Math.sin(f.userData.ang);
  });

  /* textos */
  textos.forEach(s=>{
    s.userData.a+=s.userData.v;
    s.position.set(
      s.userData.r*Math.cos(s.userData.a),
      30*Math.sin(t*0.6),
      s.userData.r*Math.sin(s.userData.a)
    );
  });

  camera.position.x=Math.sin(t*0.25)*18;
  camera.lookAt(0,0,0);

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
